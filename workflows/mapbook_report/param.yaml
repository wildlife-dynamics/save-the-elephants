# Workflow description
initialize_workflow_metadata:
  name: "Save the Elephants Mapbook Report"
  description: "Workflow to showcase movement of STE Collared Elephants that entails various metrics"

# Desired time range
define_time_range:
  since: "2025-08-01T00:00:00Z"
  until: "2025-08-11T23:59:59Z"

# Connect to EarthRanger
er_client_name:
  data_source:
    name: "ste"

# er_client_name:
#   data_source:
#     name: "ate"

# Connect to EarthEngine
gee_project_name:
  data_source:
    name: "ecoscope_poc"
    

# Value grouper /temporal grouper
configure_grouping_strategy:
  groupers: 
     - subject_name

# Subject group name
subject_observations:
    subject_group_name: "ecoscope"


# subject_observations:
#     subject_group_name: "Elephants - Big Life"


# Subject trajectory filter
convert_to_trajectories:
  trajectory_segment_filter:
    min_length_meters: 0.001
    max_length_meters: 5000.0
    max_time_secs: 7200.0
    min_time_secs: 1.0
    max_speed_kmhr: 9.0
    min_speed_kmhr: 0.01

# Create directory to persist LandDX db 
create_output_directory:
  path_name: "/home/ttemu/ecoscope-workflows/STE-Outputs"

# Specific AOI to use from LandDX db
load_aoi:
  aoi: 
    - "Community Conservancy"
    - "National Reserve" 
    - "National Park"

# LandDX specific config styles
create_styled_landdx_layers:
  style_config:
    styles:
      
      Community Conservancy:
        get_fill_color: [85, 107, 47]
        get_line_color: [85, 107, 47]
      
      National Reserve:
        get_fill_color: [143, 188, 139]
        get_line_color: [143, 188, 139]

      National Park: 
        get_fill_color: [255, 250, 205]
        get_line_color: [255, 250, 205]

    legend:
      labels: ["Community Conservancy","National Reserve", "National Park"]
      colors: ["#556b2f","#8fbc8b","#fffacd"]

generate_etd:
  auto_scale_or_custom_cell_size:
     auto_scale_or_custom: "Customize" # you could swap this to Auto
     grid_cell_size: 500

# Desired basemap layers
configure_base_maps:
  base_maps:
    - url: "https://server.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer/tile/{z}/{y}/{x}"
      opacity: 0.7
    - url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"
      opacity: 0.2
      max_zoom: 15
      min_zoom: null

# subject_home_range_season:
#   auto_scale_or_custom_cell_size:
#     auto_scale_or_custom: "Customize" # you could swap this to Auto
#     grid_cell_size: 500
#     percentiles:
#       - 99.9

generate_speed_raster:
  step_length: 2000

download_logo_path:
  url: "https://www.dropbox.com/scl/fi/1gn84pq9c7tedgg3k90qt/save-the-elephants.jpg?rlkey=ump7g2hcc2pn0pd5nst203c7w&st=jlwbhik9&dl=0"
